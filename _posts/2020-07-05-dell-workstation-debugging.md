---
layout: post
title: Dell workstation debugging
date: 2020-07-05 15:53:19
author: Peter Stevenson
summary: Debugging Dell workstation stability
categories: sysadmin
thumbnail:
tags:
 - Dell
 - workstation
 - Linux
 - stability
 - HDMI
---

# Debugging Dell workstation stability

In this post I cover the issues I had with one particular Dell Optiplex i5 machine. It was an eBay purchase and it's previous owner had Dell support perform a motherboard swap for unknown reasons.

## Dell Optiplex i5 issues

The system would drop out after around 27 days uptime. Complete Linux OS lock up. See below kernel messages.

![kernel-messages](/blog/assets/2020-07-05/kernel-messages.jpg)

The below graph is a system uptime graph. Any drops of uptime are due to system lock ups as I tried to run the system 24/7 for testing. You can correlate the higher uptimes towards the end of the graph with the below timestamped changes.

![optiplex-i5-linux](/blog/assets/2020-07-05/optiplex-i5-linux.png)

**2019-12-01:** Dell Optiplex i5 tested under Windows OS. Below is the Windows OS test uptime graph. Over 30 days uptime shows promising but not definitive results. 

* I couldn't test for longer as I needed to use the machine to get some personal work done via Linux.
* Tested intel display drivers using Windows 10 on a fresh SSD. Had some troubles with one of the displays disappearing from the dual screen intel display config.
* Used [EventGhost](https://github.com/EventGhost/EventGhost) to log device disconnections as one of the displays on the integrated GPU kept dropping out every few hours when PC screen was off.

![optiplex-i5-windows](/blog/assets/2020-07-05/optiplex-i5-windows.png)

**2020-01-04:** Cheap HDMI cables, ones with "ethernet"? replaced faulty HDMI lead and stopped getting i915 GPU hangs.

Ran memtest86+ for several days. Maybe 8 days. Passed.

Drive SMART tests. Passed.

I hookup a scope to the power supply under heavy load and no noise or power issues on the 5 v or 12 v rails.

Tests also involved minimal devices connected to USB etc.

The NIC sometimes causes a lock-up or broadcast storm of the local network on the un-managed switch the PC was connected to once the PC locked up.

**2020-03-26:** Put in a old AMD GPU to ensure it's not display, GPU or driver. This fixed all my lock up issues under Linux.

## Dell Optiplex i5 HDMI RF noise

During my testing I noticed the unstable Optiplex emits a tonne of RF noise. Wipes out 443-446 MHz I narrowed it down to 445 MHz as the center frequency.

See below SDR spectrum screenshot. The noise is generated by the HDMI signal it seems to be bus clock harmonic related as I tried different GPU and cabling...

![sdr-hdmi-noise](/blog/assets/2020-07-05/sdr-hdmi-noise.png)

After searching the internet for RF noise 445 MHz to see if there are any articles on HDMI noise I found this post confirming my suspicion: [reddit.com/r/RTLSDR/comments/9t7nfm/signal_id_445mhz](https://www.reddit.com/r/RTLSDR/comments/9t7nfm/signal_id_445mhz/)

## Dell Optiplex i7 stability comparison

Below is a screenshot of the uptime graph from my identical i7 Dell Optiplex which never had any stability issues on Linux. I have also ran Linux on many other Optiplex models with no problems what so ever. All integrated graphics.

![optiplex-i7-linux](/blog/assets/2020-07-05/optiplex-i7-linux.png)

## Summary

Looks like the issue was related to the on board graphics or other motherboard components. Given the Dell already had one motherboard swap before it came to me I am very suspect of it. The tests seem to confirm that. Given its working now I am not too worried however I could further prove the point by swapping the motherboard or PSU with another. The CPU could also be swapped with a different clock speed i7 to see if the RF noise goes away. The RF noise is the only outstanding issue I have with this odd machine now.